local Hitbox_Color = Color3.fromRGB(255, 255, 255) -- Viền hitbox màu trắng
local Hitbox_Transparency = 0.5 -- Độ trong suốt của hitbox
local Hitbox_Size = Vector3.new(5, 7, 5) -- Kích thước hitbox
local Player_Scale = 0.8 -- Giảm kích thước nhân vật

-- Hàm tạo hitbox + viền ESP cho nhân vật
local function ApplyHitboxAndESP(player)
    if player.Character then
        local char = player.Character

        -- **Tạo viền trắng ESP**
        local highlight = Instance.new("Highlight", char)
        highlight.FillColor = Color3.new(0, 0, 0) -- Màu trong suốt (chỉ có viền)
        highlight.OutlineColor = Hitbox_Color -- Viền trắng
        highlight.OutlineTransparency = Hitbox_Transparency
        highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop -- Luôn hiển thị

        -- **Tạo Hitbox Lớn**
        for _, part in pairs(char:GetChildren()) do
            if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
                part.Size = Hitbox_Size -- Phóng to hitbox
                part.Transparency = Hitbox_Transparency -- Làm hitbox trong suốt
                part.CanCollide = false -- Không va chạm
            end
        end

        -- **Thu nhỏ nhân vật**
        if char:FindFirstChild("Humanoid") then
            local humanoid = char:FindFirstChild("Humanoid")
            humanoid.BodyDepthScale.Value = Player_Scale
            humanoid.BodyHeightScale.Value = Player_Scale
            humanoid.BodyWidthScale.Value = Player_Scale
            humanoid.HeadScale.Value = Player_Scale
        end
    end
end

-- Áp dụng cho tất cả người chơi hiện tại
for _, player in pairs(game.Players:GetPlayers()) do
    ApplyHitboxAndESP(player)
end

-- Lắng nghe khi có người chơi mới vào game
game.Players.PlayerAdded:Connect(function(player)
    player.CharacterAdded:Connect(function()
        ApplyHitboxAndESP(player)
    end)
end)
